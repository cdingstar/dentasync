<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AT DentaLink - ç‰™ç§‘åŒ»ç–—ç®¡ç†å¹³å°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            color: #333;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .phone-container {
            width: 100%;
            max-width: 414px;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        /* çŠ¶æ€æ  */
        .status-bar {
            height: 44px;
            background: rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            font-size: 14px;
            font-weight: 600;
            color: white;
            position: relative;
            z-index: 100;
        }

        .status-left {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .status-right {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* å¤´éƒ¨å®¹å™¨ */
        #header-container {
            position: relative;
            z-index: 50;
        }

        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            flex: 1;
            position: relative;
            min-height: calc(100vh - 44px - 70px);
            overflow-y: auto;
        }

        /* é¡µé¢å†…å®¹å®¹å™¨ */
        #page-container {
            width: 100%;
            height: 100%;
        }

        /* åº•éƒ¨èœå•å®¹å™¨ */
        #menubar-container {
            position: relative;
            z-index: 50;
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            color: white;
            font-size: 16px;
        }

        .loading::after {
            content: '';
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 414px) {
            .phone-container {
                max-width: 100%;
                box-shadow: none;
            }
        }

        @media (min-width: 415px) {
            body {
                padding: 20px;
            }
            
            .phone-container {
                border-radius: 20px;
                min-height: calc(100vh - 40px);
            }
        }
    </style>
</head>
<body>
    <div class="phone-container">
        <!-- çŠ¶æ€æ  -->
        <div class="status-bar">
            <div class="status-left">
                <span>15:00</span>
            </div>
            <div class="status-right">
                <span>â—â—â—â—</span>
                <span>ğŸ“¶</span>
                <span>ğŸ”‹</span>
            </div>
        </div>

        <!-- å¤´éƒ¨å®¹å™¨ -->
        <div id="header-container">
            <div class="loading">åŠ è½½å¤´éƒ¨ç»„ä»¶ä¸­...</div>
        </div>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="main-content">
            <div id="page-container">
                <div class="loading">åŠ è½½é¡µé¢å†…å®¹ä¸­...</div>
            </div>
        </div>

        <!-- åº•éƒ¨èœå•å®¹å™¨ -->
        <div id="menubar-container">
            <div class="loading">åŠ è½½èœå•æ ä¸­...</div>
        </div>
    </div>

    <script>
        // å½“å‰æ¿€æ´»çš„é¡µé¢
        let currentPage = 'workspace';

        // åŠ è½½å¤´éƒ¨ç»„ä»¶
        async function loadHeader() {
            try {
                const response = await fetch('HomeHeader.html');
                const html = await response.text();
                document.getElementById('header-container').innerHTML = html;
                
                // æ‰§è¡Œå¤´éƒ¨ç»„ä»¶ä¸­çš„è„šæœ¬
                const scripts = document.getElementById('header-container').querySelectorAll('script');
                scripts.forEach(script => {
                    const newScript = document.createElement('script');
                    newScript.textContent = script.textContent;
                    document.head.appendChild(newScript);
                });
            } catch (error) {
                console.error('åŠ è½½å¤´éƒ¨ç»„ä»¶å¤±è´¥:', error);
                document.getElementById('header-container').innerHTML = '<div style="padding: 20px; color: white;">å¤´éƒ¨åŠ è½½å¤±è´¥</div>';
            }
        }

        // åŠ è½½åº•éƒ¨èœå•æ 
        async function loadMenuBar() {
            try {
                const response = await fetch('menubar.html');
                const html = await response.text();
                document.getElementById('menubar-container').innerHTML = html;
                
                // æ‰§è¡Œèœå•æ ç»„ä»¶ä¸­çš„è„šæœ¬
                const scripts = document.getElementById('menubar-container').querySelectorAll('script');
                scripts.forEach(script => {
                    const newScript = document.createElement('script');
                    newScript.textContent = script.textContent;
                    document.head.appendChild(newScript);
                });

                // è®¾ç½®èœå•ç‚¹å‡»äº‹ä»¶
                setupMenuEvents();
            } catch (error) {
                console.error('åŠ è½½èœå•æ å¤±è´¥:', error);
                document.getElementById('menubar-container').innerHTML = '<div style="padding: 20px; color: white;">èœå•æ åŠ è½½å¤±è´¥</div>';
            }
        }

        // åŠ è½½é¡µé¢å†…å®¹
        async function loadPage(pageName) {
            try {
                currentPage = pageName;
                const pageContainer = document.getElementById('page-container');
                pageContainer.innerHTML = '<div class="loading">åŠ è½½é¡µé¢ä¸­...</div>';

                const response = await fetch(`${pageName}.html`);
                const html = await response.text();
                pageContainer.innerHTML = html;
                
                // æ‰§è¡Œé¡µé¢ä¸­çš„è„šæœ¬
                const scripts = pageContainer.querySelectorAll('script');
                scripts.forEach(script => {
                    const newScript = document.createElement('script');
                    newScript.textContent = script.textContent;
                    document.head.appendChild(newScript);
                });

                // æ›´æ–°èœå•æ æ¿€æ´»çŠ¶æ€
                updateMenuActiveState(pageName);
            } catch (error) {
                console.error('åŠ è½½é¡µé¢å¤±è´¥:', error);
                document.getElementById('page-container').innerHTML = '<div style="padding: 20px; color: white;">é¡µé¢åŠ è½½å¤±è´¥</div>';
            }
        }

        // è®¾ç½®èœå•äº‹ä»¶
        function setupMenuEvents() {
            const menuItems = document.querySelectorAll('.nav-item');
            menuItems.forEach((item, index) => {
                item.addEventListener('click', function() {
                    const pages = ['workspace', 'messages', 'order', 'orders', 'more'];
                    const targetPage = pages[index];
                    if (targetPage) {
                        loadPage(targetPage);
                    }
                });
            });
        }

        // æ›´æ–°èœå•æ¿€æ´»çŠ¶æ€
        function updateMenuActiveState(activePage) {
            const menuItems = document.querySelectorAll('.nav-item');
            const pages = ['workspace', 'messages', 'order', 'orders', 'more'];
            
            menuItems.forEach((item, index) => {
                item.classList.remove('active');
                if (pages[index] === activePage) {
                    item.classList.add('active');
                }
            });
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', async function() {
            await loadHeader();
            await loadMenuBar();
            // é»˜è®¤åŠ è½½å·¥ä½œå°é¡µé¢
            await loadPage('workspace');
        });

        // å…¨å±€å‡½æ•°ï¼Œä¾›å…¶ä»–ç»„ä»¶è°ƒç”¨
        window.loadPage = loadPage;
        window.getCurrentPage = () => currentPage;
    </script>
</body>
</html>